<apex:page Controller="AddUniversity" readOnly="false" sidebar="false" showHeader="false" >
    
    <apex:slds />
    <head>
        <apex:includescript value="//code.jquery.com/jquery-3.3.1.js" / >
            <apex:includescript value="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" />
            <apex:stylesheet value="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" />
            
            <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
            <script>
                
                
                $(document).ready(function() {
                $('#example').DataTable( {
                    "scrollY":        "480px",
                    "scrollCollapse": true,
                    "ordering": false,
                    "paging":  true
                });
            });
            
            var app = angular.module('myApp', []);
            app.controller('myCtrl', function($scope) {
                $scope.wrlist1 = JSON.parse('{!JSENCODE(wrlist1)}');
                
                // console.log(as);
                $scope.id = '{!$currentpage.parameters.id}';
                console.log($scope.wrlist1);
                console.log($scope.id);
                
                $scope.my = function(param){ 
                    console.log(JSON.stringify($scope.wrlist1))
                    if(param == 'cancel'){
                        window.parent.location = "/" + $scope.id;
                    }else{
                        console.log($scope.wrlist1);
                        Visualforce.remoting.Manager.invokeAction(
                            '{!$RemoteAction.AddUniversity.save}',
                            JSON.stringify($scope.wrlist1),
                            $scope.id,
                            function(result, event){
                                
                                window.parent.location = "/" + $scope.id;
                                
                            });
                    }
                }
            });
            </script>
        </head>
        <body ng-app="myApp" ng-controller="myCtrl" > <br/>
            <div class="slds-box" style="width: 98%;margin:auto">                      
                
                <p style="text-align:center;font-size:20px">ADD UNIVERSITY</p>
                <table id="example" class="slds-table slds-table_cell-buffer slds-table--bordered slds-table_col-bordered slds-border_right slds-border_left">
                    <thead>
                        <tr  style="text-align:center">
                            
                            <th scope="col" style="background-color:#631856;color:white;width:3%;text-align:center">
                                Select
                            </th>
                            <th scope="col" style="background-color:#631856;color:white;;width:20%;text-align:left">
                                University Name                                   
                            </th>
                            <th scope="col" style="background-color:#631856;color:white;width:15%;text-align:left">
                                Type                                
                            </th>
                        </tr>
                    </thead>
                    
                    <tbody>
                        <tr ng-repeat="wr in wrlist1">
                            <td role="gridcell" style="text-align:center">
                                <input type="checkbox" ng-model="wr.chk"/>
                            </td>
                            <td role="gridcell">
                                <div class="slds-truncate">{{wr.tra.Name}}</div>
                            </td>
                            <td role="gridcell">
                                <div class="slds-truncate">{{wr.tra.Type__c}}</div>
                            </td>   
                        </tr>
                    </tbody>
                </table>
                
                <div class="slds-scope" align="center">
                    <button  class="slds-button slds-button_brand" ng-click="my()">Add University</button>
                    <button class="slds-button slds-button_destructive" ng-click="my('cancel')">Cancel</button>
                </div>
            </div>
        </body>
    </apex:page>