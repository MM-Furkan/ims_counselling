global class RESTGetVarient implements Database.Batchable<sObject> {
    
     global Database.QueryLocator start(Database.BatchableContext BC)
    {
        String query = 'SELECT ID, Name, Centre_Code__c FROM Centre__c';
        return Database.getQueryLocator(query);
    }
 
    global void execute(Database.BatchableContext BC, List<Centre__c> scope)
    {
        Set<String> cntre = new Set<String>();
        Set<String> prodSet = new Set<String>();
         for(Centre__c c : scope)
         {
          cntre.add(c.Centre_Code__c);
         }
        List<Program__c> productList = [SELECT Id, Name, Program_Code__c FROM Program__c WHERE Centre__r.Centre_Code__c IN:cntre];
        For(Program__c p:productList){
            prodSet.add(p.Program_Code__c);
        }
        
        List<Lead_Mode__c> lmode = [SELECT Id, Name From Lead_Mode__c];
            
         
    }  
    global void finish(Database.BatchableContext BC)
    {
    }
    

    public void getCall(String centre,String product,String mode){
        
        String js = '{\"txtcentre\":\"'+centre+'\",\"txtproduct\":\"'+product+'\",\"txtmode\":\"'+mode+'\"}';
        String s = '';
        Http h = new Http();		
        HttpRequest req = new HttpRequest();
        
        req.setMethod('POST');
        req.setBody(js);
        req.setTimeout(120000);
        req.setHeader('Content-type', 'application/json');
        req.setHeader('token', s);
        req.setEndpoint('http://lima.imsindia.com/MyIMS/default.aspx?action=getmode');//sandbox url
        
        System.debug('The request is made to Datamatics-in Account---'+req);
        HttpResponse res = h.send(req);
        System.debug('The response is getting from Datamatics--in Account--'+res);
        System.debug('res.getbody'+res.getbody());
        String jsun = res.getBody();
        JSON2ApexGetVarient jsCentre = JSON2ApexGetVarient.parse(res.getBody());
        If(jsCentre.variant.size()>0){
            For(variant st:jsCentre.variant){
                System.debug('I am printing --'+st);
            }
        }else{
            System.debug('Centre is Empty');
        }
        
        
        
    }
    public void updateCentre(){
        
    } 
    
    //
// Generated by JSON2Apex http://json2apex.herokuapp.com/
//

public class JSON2ApexGetVarient {

    public List<Variant> variant;
}
	public class Variant {
		public String Code;
		public String Variant;
	}

	

	
	public static JSON2ApexGetVarient parse(String json) {
		return (JSON2ApexGetVarient) System.JSON.deserialize(json, JSON2ApexGetVarient.class);
	}

}